[mypy]
python_version = 3.11
strict = True

# Don't fail on missing third-party stubs
ignore_missing_imports = True

# Warnings
warn_unused_ignores = True

# Require full type annotations
disallow_untyped_defs = True
disallow_incomplete_defs = True

# Avoid implicit Optional[...] from default=None
no_implicit_optional = True

# Check even untyped functions
check_untyped_defs = True

# Forbid Any in generics like list[Any]
disallow_any_generics = True

# Cache
cache_dir = .mypy_cache

# Skip tests and alembic migrations
exclude = ^(tests/|alembic/|migrations/|scripts/)

# Enable pydantic v2 plugin
plugins =
    pydantic.mypy
